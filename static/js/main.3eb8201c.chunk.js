(this["webpackJsonpreact-login-demo"]=this["webpackJsonpreact-login-demo"]||[]).push([[0],{157:function(e,t,n){},170:function(e,t){},219:function(e,t,n){},230:function(e,t,n){"use strict";n.r(t);var c=n(4),a=n(125),s=n.n(a),r=(n(157),n(19)),o=n.n(r),i=n(95),l=n(138),u=n(34),j=n(35),d=n(12),b=n(137),h=n(64),O=Object(c.createContext)(null);function p(){return Object(c.useContext)(O)}var m=n(5),f=function(){var e=p(),t=e.isAuthenticated,n=e.userHasAuthenticated,a=Object(c.useState)(""),s=Object(j.a)(a,2),r=s[0],i=s[1],l=Object(c.useState)(""),b=Object(j.a)(l,2),O=b[0],f=b[1],x=Object(d.g)();return Object(c.useEffect)((function(){t&&x.push("/welcome")}),[t,x]),Object(m.jsx)("div",{className:"formCenter",children:Object(m.jsxs)("form",{className:"formFields",onSubmit:function(){Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.signIn(r,O);case 3:n(!0),alert("Logged in"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),x.push("/welcome")},children:[Object(m.jsxs)("div",{className:"formField",children:[Object(m.jsx)("label",{className:"formFieldLabel",htmlFor:"email",children:"E-Mail Address"}),Object(m.jsx)("input",{type:"email",id:"email",className:"formFieldInput",placeholder:"Enter your email",name:"email",value:r,onChange:function(e){i(e.target.value)}})]}),Object(m.jsxs)("div",{className:"formField",children:[Object(m.jsx)("label",{className:"formFieldLabel",htmlFor:"password",children:"Password"}),Object(m.jsx)("input",{type:"password",id:"password",className:"formFieldInput",placeholder:"Enter your password",name:"password",value:O,onChange:function(e){f(e.target.value)}})]}),Object(m.jsxs)("div",{className:"formField",children:[Object(m.jsx)("button",{className:"formFieldButton",children:"Sign In"})," "]})]})})},x=n(124),v=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!1),r=Object(j.a)(s,2),i=r[0],l=r[1],d=p().userHasAuthenticated;function b(){return(b=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.signOut();case 2:d(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){i||l(!0),Object(u.a)(o.a.mark((function e(){var t;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x.a.get("lambda-API","/State",{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Credentials":!0}});case 3:t=e.sent,console.log(t.data),a({name:"one",state:"two",machine:"tree"}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))()};return Object(c.useEffect)((function(){i||O()}),[i,O]),Object(m.jsxs)("div",{className:"appForm",children:[Object(m.jsx)("div",{children:Object(m.jsxs)("p",{children:["the status of the server ",Object(m.jsx)("b",{children:n.name})," is ",n.state," on a ",n.machine," machine"]})}),Object(m.jsxs)("div",{children:[Object(m.jsx)("button",{onClick:O,children:"Check server status"}),Object(m.jsx)("button",{onClick:function(){Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log("start")}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})))(),console.log("bonjour")},children:"Start the server"}),Object(m.jsx)("button",{onClick:function(){Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{console.log("stop")}catch(t){console.error(t)}case 1:case"end":return e.stop()}}),e)})))()},children:"Stop the server"})]}),Object(m.jsx)("div",{children:Object(m.jsx)("button",{onClick:function(){return b.apply(this,arguments)},children:"Log Out"})})]})},g=(n(219),["children"]);var w=function(){var e=Object(c.useState)(!1),t=Object(j.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(!0),r=Object(j.a)(s,2),p=r[0],x=r[1];function w(){return(w=Object(u.a)(o.a.mark((function e(){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,h.a.currentSession();case 3:console.log("already logged in"),a(!0),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),"No current user"!==e.t0&&alert(e.t0),console.log("not logged in");case 11:x(!1);case 12:case"end":return e.stop()}}),e,null,[[0,7]])})))).apply(this,arguments)}Object(c.useEffect)((function(){!function(){w.apply(this,arguments)}()}),[]);var N=function(e){var t=e.children,c=Object(l.a)(e,g);return Object(m.jsx)(d.b,Object(i.a)(Object(i.a)({},c),{},{children:n?t:Object(m.jsx)(d.a,{to:"sign-in"})}))};return!p&&Object(m.jsx)(O.Provider,{value:{isAuthenticated:n,userHasAuthenticated:a},children:Object(m.jsx)(b.a,{basename:"/react-auth-ui/",children:Object(m.jsxs)("div",{className:"App",children:[Object(m.jsx)("div",{className:"appAside"}),Object(m.jsx)("div",{className:"appForm",children:Object(m.jsxs)(d.d,{children:[Object(m.jsx)(d.b,{path:"/sign-in",children:Object(m.jsxs)("div",{className:"formTitle",children:[Object(m.jsx)("div",{className:"formTitle",children:" Please sign in"}),Object(m.jsx)(f,{})]})}),Object(m.jsx)(N,{path:"/welcome",children:Object(m.jsxs)("div",{className:"formTitle",children:[Object(m.jsx)("div",{className:"formTitle",children:" Welcome you"}),Object(m.jsx)(v,{})]})}),Object(m.jsx)(d.a,{to:"/sign-in"})]})})]})})})},N={apiGateway:{REGION:"eu-west-3",URL:"https://yptrru9tx8.execute-api.eu-west-3.amazonaws.com"},cognito:{REGION:"eu-west-3",USER_POOL_ID:"eu-west-3_VL7aT2B6L",APP_CLIENT_ID:"678utp8o005ghaet957rfena50"}};n(41).default.configure({Auth:{mandatorySignIn:!0,region:N.cognito.REGION,userPoolId:N.cognito.USER_POOL_ID,userPoolWebClientId:N.cognito.APP_CLIENT_ID},API:{endpoints:[{name:"lambda-API",endpoint:N.apiGateway.URL,region:N.apiGateway.REGION}]}}),s.a.render(Object(m.jsx)(w,{}),document.getElementById("root"))}},[[230,1,2]]]);
//# sourceMappingURL=main.3eb8201c.chunk.js.map