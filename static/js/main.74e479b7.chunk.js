(this["webpackJsonpreact-minecraft-server"]=this["webpackJsonpreact-minecraft-server"]||[]).push([[0],{141:function(e,t,n){},154:function(e,t){},204:function(e,t,n){},215:function(e,t,n){"use strict";n.r(t);var a=n(3),c=n(115),s=n.n(c),r=(n(141),n(18)),i=n.n(r),o=n(83),l=n(128),u=n(33),d=n(29),j=n(9),b=n(127),p=n(53),h=Object(a.createContext)(null);function m(){return Object(a.useContext)(h)}var O=n(4),f=function(){var e=m(),t=e.isAuthenticated,n=e.userHasAuthenticated,c=Object(a.useState)(""),s=Object(d.a)(c,2),r=s[0],o=s[1],l=Object(a.useState)(""),b=Object(d.a)(l,2),h=b[0],f=b[1],v=Object(j.g)();return Object(a.useEffect)((function(){t&&v.push("/welcome")}),[t,v]),Object(O.jsx)("div",{className:"formCenter",children:Object(O.jsxs)("form",{className:"formFields",onSubmit:function(){Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.signIn(r,h);case 3:n(!0),alert("Logged in"),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),alert(e.t0.message);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})))(),v.push("/welcome")},children:[Object(O.jsxs)("div",{className:"formField",children:[Object(O.jsx)("label",{className:"formFieldLabel",htmlFor:"email",children:"E-Mail Address"}),Object(O.jsx)("input",{type:"email",id:"email",className:"formFieldInput",placeholder:"Enter your email",name:"email",value:r,onChange:function(e){o(e.target.value)}})]}),Object(O.jsxs)("div",{className:"formField",children:[Object(O.jsx)("label",{className:"formFieldLabel",htmlFor:"password",children:"Password"}),Object(O.jsx)("input",{type:"password",id:"password",className:"formFieldInput",placeholder:"Enter your password",name:"password",value:h,onChange:function(e){f(e.target.value)}})]}),Object(O.jsxs)("div",{className:"formField",children:[Object(O.jsx)("button",{className:"formFieldButton",children:"Sign In"})," "]})]})})},v=n(114),x=function(){var e=Object(a.useState)([]),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!1),r=Object(d.a)(s,2),o=r[0],l=r[1],j=m().userHasAuthenticated,b=m().idToken;function h(){return(h=Object(u.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.a.signOut();case 2:j(!1);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return x.apply(this,arguments)}function x(){return(x=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o||l(!0),e.prev=1,e.next=4,v.a.get("lambda-API","/Stage/status",{headers:{Authorization:b}});case 4:t=e.sent,c(t),console.log(t.message,t.name,t.state,t.machine),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),console.error(e.t0);case 12:case"end":return e.stop()}}),e,null,[[1,9]])})))).apply(this,arguments)}function g(){return(g=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("lambda-API","/Stage/start",{headers:{Authorization:b}});case 3:t=e.sent,console.log("start"),console.log(t.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function w(){return(w=Object(u.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,v.a.post("lambda-API","/Stage/stop",{headers:{Authorization:b}});case 3:t=e.sent,console.log("stop"),console.log(t.message),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){o||f()}),[o,f]),Object(O.jsxs)("div",{className:"appForm",children:[Object(O.jsx)("div",{children:Object(O.jsxs)("p",{children:["the status of the server ",Object(O.jsx)("b",{children:n.name})," is ",n.state," on a ",n.machine," machine"]})}),Object(O.jsxs)("div",{children:[Object(O.jsx)("button",{onClick:f,children:"Check server status"}),Object(O.jsx)("button",{onClick:function(){return g.apply(this,arguments)},children:"Start the server"}),Object(O.jsx)("button",{onClick:function(){return w.apply(this,arguments)},children:"Stop the server"})]}),Object(O.jsx)("div",{children:Object(O.jsx)("button",{onClick:function(){return h.apply(this,arguments)},children:"Log Out"})})]})},g=(n(204),["children"]);var w=function(){var e=Object(a.useState)(!1),t=Object(d.a)(e,2),n=t[0],c=t[1],s=Object(a.useState)(!0),r=Object(d.a)(s,2),m=r[0],v=r[1],w=Object(a.useState)(),N=Object(d.a)(w,2),I=N[0],k=N[1];function y(){return(y=Object(u.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,p.a.currentSession();case 3:t=e.sent,n=t.getIdToken().getJwtToken(),console.log(n),k(n),console.log("already logged in"),c(!0),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),"No current user"!==e.t0&&alert(e.t0),console.log("not logged in");case 15:v(!1);case 16:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}Object(a.useEffect)((function(){!function(){y.apply(this,arguments)}()}),[]);var A=function(e){var t=e.children,a=Object(l.a)(e,g);return Object(O.jsx)(j.b,Object(o.a)(Object(o.a)({},a),{},{children:n?t:Object(O.jsx)(j.a,{to:"sign-in"})}))};return!m&&Object(O.jsx)(h.Provider,{value:{isAuthenticated:n,userHasAuthenticated:c,idToken:I},children:Object(O.jsx)(b.a,{basename:"/react-auth-ui/",children:Object(O.jsxs)("div",{className:"App",children:[Object(O.jsx)("div",{className:"appAside"}),Object(O.jsx)("div",{className:"appForm",children:Object(O.jsxs)(j.d,{children:[Object(O.jsx)(j.b,{path:"/sign-in",children:Object(O.jsxs)("div",{className:"formTitle",children:[Object(O.jsx)("div",{className:"formTitle",children:" Please sign in"}),Object(O.jsx)(f,{})]})}),Object(O.jsx)(A,{path:"/welcome",children:Object(O.jsxs)("div",{className:"formTitle",children:[Object(O.jsx)("div",{className:"formTitle",children:" Welcome you"}),Object(O.jsx)(x,{})]})}),Object(O.jsx)(j.a,{to:"/sign-in"})]})})]})})})},N={apiGateway:{REGION:"eu-west-3",URL:"https://ivz4b9m4g0.execute-api.eu-west-3.amazonaws.com"},cognito:{REGION:"eu-west-3",USER_POOL_ID:"eu-west-3_AWPEJ24Tz",APP_CLIENT_ID:"3ihu80pskqv86o8v3ol89ufqr0"}};n(36).default.configure({Auth:{mandatorySignIn:!0,region:N.cognito.REGION,userPoolId:N.cognito.USER_POOL_ID,userPoolWebClientId:N.cognito.APP_CLIENT_ID},API:{endpoints:[{name:"lambda-API",endpoint:N.apiGateway.URL,region:N.apiGateway.REGION}]}}),s.a.render(Object(O.jsx)(w,{}),document.getElementById("root"))}},[[215,1,2]]]);
//# sourceMappingURL=main.74e479b7.chunk.js.map